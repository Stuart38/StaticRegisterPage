!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n=e();for(var o in n)("object"==typeof exports?exports:t)[o]=n[o]}}(self,(function(){return(()=>{"use strict";var t,e,n={r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},o={};n.r(o),function(t){t.HORIZONTAL="HORIZONTAL",t.RECTANGLE="RECTANGLE",t.VERTICAL="VERTICAL",t.MOBILE="MOBILE",t.MOBILE_BIG="MOBILE_BIG",t.MOBILE_HORIZONTAL="MOBILE_HORIZONTAL",t.PORTRAIT="PORTRAIT",t.BILLBOARD="BILLBOARD"}(t||(t={}));(e={})[t.HORIZONTAL]=[[970,90],[728,90],[468,60],[234,60]],e[t.RECTANGLE]=[[336,280],[300,250],[250,250],[200,200],[180,150],[125,125]],e[t.VERTICAL]=[[300,600],[160,600],[120,600],[120,240]],e[t.MOBILE]=[[320,50]],e[t.MOBILE_BIG]=[[320,100],[320,50]],e[t.MOBILE_HORIZONTAL]=[[970,90],[728,90],[468,60],[320,100],[320,50],[234,60]],e[t.PORTRAIT]=[[300,1050]],e[t.BILLBOARD]=[[970,250]],e["300x600"]=[[300,600],[160,600]],e["336x280"]=[[336,280],[300,250]],e["728x90"]=[[728,90],[468,60]],e["970x90"]=[[970,90],[728,90],[468,60]];var i="https://apps.media-lab.ai",r="web_".concat("2.1.1b"),a="ana_client_uid",s="ana_client_session_id",d="ana_vast",c="ana_staging",l="https://securepubads.g.doubleclick.net/tag/js/gpt.js",u="//c.amazon-adsystem.com/aax2/apstag.js",p=[new RegExp("^https://js.media-lab.ai$"),new RegExp("^https://apps.media-lab.ai$"),new RegExp("^https://staging.apps.media-lab.ai$"),new RegExp("^https://tpc.googlesyndication.com$"),new RegExp("^https?://ana-sdk-creative.s3-website-us-west-2.amazonaws.com$"),new RegExp("^https://\\w+.safeframe.googlesyndication.com$"),new RegExp("^https?://localhost:9000$"),new RegExp("^https?://127.0.0.1:9000$")],h=[new RegExp("^https://js.media-lab.ai$"),new RegExp("^https://apps.media-lab.ai$"),new RegExp("^https://staging.apps.media-lab.ai$"),new RegExp("^https?://localhost:2279$"),new RegExp("^https?://127.0.0.1:2279$")],f=417,g="frequency_cap",y="cs_",v="cs_is_valid",m=2e3,b=function(){var t=null;if(window.XMLHttpRequest?t=new XMLHttpRequest:window.ActiveXObject&&(t=new ActiveXObject("Microsoft.XMLHTTP")),!t)throw Error("Cannot create an XMLHttpRequest instance");return t},E=function(t){t.withCredentials=!0,t.setRequestHeader("Content-Type","application/json"),t.setRequestHeader("ana-api-key","056363cfdcfcf7de5cea11820138b4d2daf3ca"),t.setRequestHeader("lib_version",r),t.setRequestHeader("publisher_version","web_0.0.1")},A=function(t,e){void 0===e&&(e={});var n,o,i=new URL(t);return e&&e!=={}?(void 0!==i.searchParams?Object.keys(e).forEach((function(t){return i.searchParams.append(t,String(e[t]))})):i.href+="?"+(n=e,o=[],Object.keys(n).forEach((function(t){o.push(encodeURIComponent(t)+"="+encodeURIComponent(n[t]))})),o.join("&")),i):i};function w(t){return function(){this.readyState===XMLHttpRequest.DONE&&t&&t(this)}}function S(t){return function(){console.error("Error occurred while HTTP request to "+this.responseURL),t&&t(this)}}var I=function(t,e,n,o,i){void 0===e&&(e={}),void 0===n&&(n=null);var r=b();r.onreadystatechange=w(o),r.onerror=S(i);var a=A(t,e);r.open("POST",a.toString()),E(r),r.send(n?JSON.stringify(n):null)},T=function(t,e,n,o){void 0===e&&(e={});var i=b();i.onreadystatechange=w(n),i.onerror=S(o);var r=A(t,e);i.open("GET",r.toString()),E(i),i.send()},D=function(t,e,n){if(n||2===arguments.length)for(var o,i=0,r=e.length;i<r;i++)!o&&i in e||(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))};function O(){return window.ANAWebSDKInstance}function _(){var t=O();if(t)return t.propertyId;var e=window.ANAWebPropertyId;return e||window.location.hostname}function P(t){try{var e=t(),n="__random_key__",o="__random_val__";return e.setItem(n,o),e.getItem(n)!==o?!1:(e.removeItem(n),!0)}catch(t){return!1}}function R(){return!!window.ana_debug||-1!==window.location.href.indexOf("ana_debug=1")}function C(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];R()&&console.log.apply(console,D(["%cðŸš¨ANA: ","background: #222; color: #33c65a"],t,!1))}function M(t){return-1!==document.cookie.indexOf(t+"=")}var B,L,k=function(){function t(){}return t.prototype.setItem=function(t,e){this[t]=e},t.prototype.getItem=function(t){var e=this[t];return e||(e=null),e},t.prototype.removeItem=function(t){delete this[t]},t.prototype.clear=function(){var t=this;Object.keys(this).forEach((function(e){delete t[e]}))},t.prototype.key=function(t){throw Error("not implemented (index = ".concat(t))},Object.defineProperty(t.prototype,"length",{get:function(){return Object.keys(this).length},enumerable:!1,configurable:!0}),t}();window.anaStorage=P((function(){return window.localStorage}))?window.localStorage:new k,window.anaSessionStorage=P((function(){return window.sessionStorage}))?window.sessionStorage:new k,function(t){t[t.GOOGLE=0]="GOOGLE",t[t.ANA=1]="ANA"}(B||(B={})),function(t){t[t.VIDEO_JS=0]="VIDEO_JS",t[t.HTML5=1]="HTML5"}(L||(L={}));var N=function(){function t(t){var e=this;Object.keys(t).forEach((function(n){var o=function(t,e){void 0===e&&(e=!1);var n=t.replace(/([-_]id$)|([-_][a-z])/gi,(function(t){return t.toUpperCase().replace("-","").replace("_","")}));return"id"===n&&(n="ID"),n&&e&&(n=n[0].toUpperCase()+n.slice(1)),n}(n,!0);e[o]=t[n]}))}return t.prototype.toCustomJSON=function(){var t=this,e={};return Object.keys(this).forEach((function(n){var o=n.replace(/\.?([A-Z]+)/g,(function(t,e){return"_"+e.toLowerCase()})).replace(/^_/,"");e[o]=t[n]})),e},t.prototype.renderImpressionPixels=function(){var t=this.BidID;this.ImpressionPixels.forEach((function(e){var n=document.createElement("img");n.setAttribute("data-bid-id",t),n.setAttribute("src",e),n.setAttribute("width","1"),n.setAttribute("height","1"),document.body.appendChild(n)}))},t.prototype.removeImpressionPixels=function(){for(var t=[],e=document.getElementsByTagName("img"),n=0;n<e.length;n++){var o=e[n];o.getAttribute("data-bid-id")===String(this.BidID)&&t.push(o)}t.forEach((function(t){return document.body.removeChild(t)}))},t}(),U=function(){for(var t=[],e="0123456789abcdef",n=0;n<36;n++)t[n]=e.substr(Math.floor(16*Math.random()),1);return t[14]="4",t[19]=e.substr(3&+t[19]|8,1),t[8]=t[13]=t[18]=t[23]="-",t.join("")},V="y"===new URLSearchParams(window.location.search).get("tracing"),q=function(){var t=anaStorage.getItem(a);return t||(t=U(),anaStorage.setItem(a,t)),V?"tr"+t:t},j=function(t,e){anaStorage.setItem(y+t,e)},x=function(t,e,n){if(!t)throw Error("propertyId is required");var o;o=t,window.ANAWebPropertyId=o,function(t){anaStorage.setItem(a,t)}(e),ot.UserSync.getUrls(Object.keys(n),(function(t){if(200===t.status){if(""!==t.responseType&&"text"!==t.responseType)throw Error('incorrect response type "'.concat(t.responseType,'" from ').concat(t.responseURL));if(!M(v)){var e=new Date,n=e.getTime()+864e5;e.setTime(n);var o="".concat(v,"=1;expires=").concat(e.toUTCString(),";path=/");C("setting cookie:",o),document.cookie=o}var i=JSON.parse(t.responseText),r=i.sync_urls,a=i.cookie_ids,s=a?Object.keys(a):null;C("got response from /doh/sync:",r,a),Object.keys(r).forEach((function(t){s&&-1!==s.indexOf(t)||X(t,r[t])})),a&&Object.keys(a).forEach((function(t){var e=a[t];e&&j(t,e)}))}}))};function G(t){this.callCounter++,C("appending iframe to body",t),document.body?document.body.appendChild(t):(console.warn("ready to inject an iframe but the body is not ready, document.body=",document.body),this.callCounter<200&&setTimeout(G.bind(this,t),50))}var H,F,W,J,z,K,$,Q,Z,X=function(t,e){var n=_(),o=document.createElement("iframe");o.setAttribute("src",e),o.setAttribute("frameborder","0"),o.setAttribute("scrolling","no"),o.setAttribute("marginheight","0"),o.setAttribute("marginwidth","0"),o.setAttribute("TOPMARGIN","0"),o.setAttribute("LEFTMARGIN","0"),o.setAttribute("allowtransparency","true"),o.setAttribute("width","0"),o.setAttribute("height","0"),o.setAttribute("data-property-id",n),o.onload=function(){C("iframe for ".concat(t," has been successfully loaded"))},C("creating cookie syncing iframe for "+t,e),setTimeout(G.bind({callCounter:0},o),0)},Y=function(){var t={};return Object.keys(anaStorage).forEach((function(e){0===e.indexOf(y)&&M(v)&&(t[e.slice(y.length)]=anaStorage.getItem(e))})),t};!function(t){t[t.PageLoadSoundOn=1]="PageLoadSoundOn",t[t.PageLoadSoundOff=2]="PageLoadSoundOff",t[t.ClickSoundOn=3]="ClickSoundOn",t[t.MouseOverSoundOn=4]="MouseOverSoundOn",t[t.EnterViewpointSoundOn=5]="EnterViewpointSoundOn",t[t.EnterViewpointSoundOff=6]="EnterViewpointSoundOff"}(H||(H={})),function(t){t[t.GenericPostRoll=-2]="GenericPostRoll",t[t.GenericMidRoll=-1]="GenericMidRoll",t[t.PreRoll=0]="PreRoll",t[t.MidRoll3Sec=3]="MidRoll3Sec",t[t.MidRoll5Sec=5]="MidRoll5Sec",t[t.MidRoll10Sec=10]="MidRoll10Sec",t[t.MidRoll15Sec=15]="MidRoll15Sec",t[t.MidRoll30Sec=30]="MidRoll30Sec",t[t.MidRoll60Sec=60]="MidRoll60Sec"}(F||(F={})),function(t){t[t.InStream=1]="InStream",t[t.InBanner=2]="InBanner",t[t.InArticle=3]="InArticle",t[t.InFeed=4]="InFeed",t[t.Interstitial=5]="Interstitial"}(W||(W={})),function(t){t[t.InStream=1]="InStream",t[t.Overlay=2]="Overlay"}(J||(J={})),function(t){t[t.OnVideoCompletion=1]="OnVideoCompletion",t[t.OnLeavingViewport=2]="OnLeavingViewport",t[t.OnLeavingViewportContinues=3]="OnLeavingViewportContinues"}(z||(z={})),function(t){t[t.Unknown=0]="Unknown",t[t.AboveTheFold=1]="AboveTheFold",t[t.Deprecated=2]="Deprecated",t[t.BelowTheFold=3]="BelowTheFold",t[t.Header=4]="Header",t[t.Footer=5]="Footer",t[t.Sidebar=6]="Sidebar",t[t.FullScreen=7]="FullScreen"}(K||(K={})),function(t){t[t.Vast10=1]="Vast10",t[t.Vast20=2]="Vast20",t[t.Vast30=3]="Vast30",t[t.Vast10Wrapper=4]="Vast10Wrapper",t[t.Vast20Wrapper=5]="Vast20Wrapper",t[t.Vast30Wrapper=6]="Vast30Wrapper",t[t.Vast40=7]="Vast40",t[t.Vast40Wrapper=8]="Vast40Wrapper",t[t.Daast10=9]="Daast10",t[t.Daast10Wrapper=10]="Daast10Wrapper"}($||($={})),function(t){t[t.Vpaid10=1]="Vpaid10",t[t.Vpaid20=2]="Vpaid20",t[t.Mraid1=3]="Mraid1",t[t.Ormma=4]="Ormma",t[t.Mraid2=5]="Mraid2",t[t.Mraid3=6]="Mraid3"}(Q||(Q={})),function(t){t[t.Streaming=1]="Streaming",t[t.Progressive=2]="Progressive",t[t.Download=3]="Download"}(Z||(Z={}));var tt=function(){var t=anaSessionStorage.getItem(s);return t||(t=U(),anaSessionStorage.setItem(s,t)),V?"tr"+t:t},et=function(t,e){var n=O().consentManager;return{ad_unit:t,auction_timeout:m,inventory_type:"web",additional_targeting:e,property_id:_(),opportunity_data:{platform:"web"},site:{page:document.location.href,referer:document.referrer},matched_ids:{ids:Y()},consent:{tcfV2:n.tcfV2String,usPrivacyString:n.usPrivacyString},session_id:tt()}},nt=function(t,e,n,o,i,r,a,s){var d=et(t,e);return d.video_delivery=Z.Progressive,d.video_placement=n,d.video_playback_method=o,d.video_position=i,d.video_start_delay=r,d.video_width=a,d.video_height=s,d},ot={BannerBids:{get:function(t,e,n,o){I("".concat(rt(),"/wana/bids/request"),{uid:q()},et(t,e),(function(t){switch(t.status){case 200:var e=JSON.parse(t.responseText).bids||[];n({code:200,bids:e.map((function(t){return new N(t)}))});break;case f:var o=void 0;o=JSON.parse(t.responseText).message===g?g:t.status.toString(),n({code:f,bids:[],err_msg:o});break;default:console.error("HTTP error "+t.status),n({code:t.status,bids:[],err_msg:t.status.toString()})}}),o)},invalidate:function(t,e,n,o){C("invalidating bids for adUnitID ".concat(t,":"),e);var i=e.map((function(t){var e=t.toCustomJSON();return e.creative="",e.impression_pixels=[],e.view_pixels=[],e.click_pixels=[],e}));I("".concat(rt(),"/wana/bids/invalidate"),{uid:q(),ad_unit:t},{bids:i},n,o)}},VideoBids:{get:function(t,e,n,o,i,r,a,s,d,c){var l=nt(t,e,n,i,o,r,a,s);I("".concat(rt(),"/wana/bids/request"),{uid:q()},l,(function(e){switch(e.status){case 200:var n=JSON.parse(e.responseText);C("".concat(t," got video bid response from ANA"),n);var o=n.bids||[];d({code:200,fallback_vast_url:n.fallback_vast_url,bids:o.map((function(t){return new N(t)}))});break;case f:var i=void 0;i=(n=JSON.parse(e.responseText)).message===g?g:e.status.toString(),d({code:f,bids:[],fallback_vast_url:null,err_msg:i});break;default:console.error("HTTP error "+e.status),d({code:e.status,bids:[],fallback_vast_url:null,err_msg:e.status.toString()})}}),c)},vicEvent:function(t,e,n){var o=function(t){return t.split("").map((function(t){return t.charCodeAt(0).toString(16).padStart(2,"0")})).join("")}(q()+":"+e);T("".concat(rt(),"/ana/vics/video"),{event:t,bk:o,bid_id:n},null,console.error)}},VMAP:{get:function(t,e,n,o,i,r,a,s,d,c){var l=nt(t,e,n,i,o,r,a,s);I("".concat(rt(),"/vmap/request"),{uid:q()},l,(function(e){switch(e.status){case 200:var n=JSON.parse(e.responseText);C("".concat(t," got video bid response from ANA"),n),d({code:200,tag_url:n.tag_url});break;case f:var o=void 0;o=(n=JSON.parse(e.responseText)).message===g?g:e.status.toString(),d({code:f,tag_url:null,err_msg:o});break;default:console.error("HTTP error "+e.status),d({code:e.status,tag_url:null,err_msg:e.status.toString()})}}),c)}},UserSync:{getUrls:function(t,e){var n=_();I("".concat("https://apps.media-lab.ai","/doh/sync"),{uid:q(),property_id:n},{synced_ids:t},e)},doSync:function(t,e,n){T(e,null,n)}},Hertz:{impression:function(t,e){void 0===e&&(e="adserver"),C("reporting on bid ".concat(e," impression to hertz for ").concat(t));var n=_(),o=q(),i=tt();T("".concat(rt(),"/hertz/impression"),{uid:o,ad_unit_id:t,session_id:i,bid_id:e,property_id:n},null)}}},it=function(t,e){e&&(ot.BannerBids.invalidate(t,[e],null,console.error),e.renderImpressionPixels())},rt=function(){return window.ana_staging||-1!==window.location.href.indexOf(c)?i.replace("https://","https://staging."):i},at=function(){return at=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},at.apply(this,arguments)},st={adUnitID:"",format:t.HORIZONTAL,elementID:"",collapseBeforeFill:!1,collapseIfNoFill:!1,dimensions:null,baseTargeting:{},passThroughANA:!1,apsEnabled:!0},dt=function(){function t(t,e){this.options=at(at({},st),e),this.anaWeb=t,this.adUnitID=this.options.adUnitID,this.elementID=this.options.elementID,this.dimensions=this.options.dimensions,this.baseTargeting=this.options.baseTargeting,this.passThroughANA=this.options.passThroughANA,this.apsEnabled=t.apsEnabled&&this.options.apsEnabled,this.refreshCount=0}return t.prototype.fetchANABids=function(t,e){var n=this;if(!document.hasFocus()&&this.refreshCount>0)return C("prevent ad slot refresh - document not in focus"),e&&e();if(this.refreshCount++,this.passThroughANA)t&&t([]);else{var o=at(at({},this.anaWeb.globalTargeting),this.baseTargeting);ot.BannerBids.get(this.adUnitID,o,(function(o){var i=[];switch(o.code){case 200:(i=o.bids).length>0&&n.anaWeb.bidManager.addBids(i,n.adUnitID);break;case f:return o.err_msg===g&&console.warn("#".concat(n.elementID," ").concat(n.adUnitID," ANA user reached fcap")),void(e&&e(o.err_msg))}t&&t(i)}),(function(e){console.error(e),t&&t([])}))}},t.prototype.fetchAPSBids=function(t,e){throw Error("method `fetchAPSBids` is not implemented")},t.prototype.updateTargeting=function(){},t.prototype.getTopBid=function(){var t=this.anaWeb,e=this.adUnitID;return t.bidManager.getBid(e)},t.prototype.renderInElement=function(t,e){var n=this.adUnitID,o=this.anaWeb;!function(t,e){var n=document.getElementById(t);if(!n)throw Error("tried to render ad on missing element "+t);for(;n.firstChild;)n.removeChild(n.firstChild);"none"===n.style.display&&(n.style.display="inline-block");var o=document.createElement("iframe");o.setAttribute("srcdoc",e.Creative),o.setAttribute("frameborder","0"),o.setAttribute("scrolling","no"),o.setAttribute("marginheight","0"),o.setAttribute("marginwidth","0"),o.setAttribute("TOPMARGIN","0"),o.setAttribute("LEFTMARGIN","0"),o.setAttribute("allowtransparency","true");var i=e.Width,r=e.Height;o.setAttribute("width","".concat(i)),o.setAttribute("height","".concat(r)),n.append(o)}(t,e),it(n,e),o.bidManager.useBid(n,e.BidID)},t.prototype.alreadyRendered=function(){throw Error("unimplemented method: alreadyRendered")},t}();dt.prototype.toString=function(){return"ANASlot('".concat(this.adUnitID,"', '").concat(this.elementID,"')")};var ct,lt=(ct=function(t,e){return ct=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},ct(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}ct(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),ut=function(){return ut=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},ut.apply(this,arguments)},pt=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o.format=o.options.format,o.collapseBeforeFill=o.options.collapseBeforeFill,o.collapseIfNoFill=o.options.collapseIfNoFill,o.slot=null,o.slotType=B.GOOGLE,o.resetRequestMgr(),o.registerSlot(),o}return lt(e,t),e.prototype.resetRequestMgr=function(){this.requestMgr={didDirectRender:!1,anaRequestComplete:!1,apsRequestComplete:!1}},e.prototype.fetchAPSBids=function(t){var e=this;this.anaWeb.apsEnabled&&window.apstag.fetchBids({slots:[{slotID:this.elementID,slotName:this.adUnitID,sizes:this.dimensions}]},(function(n){googletag.cmd.push((function(){e.apsRequestCompleted()})),t&&t(n)}))},e.prototype.anaRequestCompleted=function(){this.requestMgr.anaRequestComplete=!0},e.prototype.apsRequestCompleted=function(){window.apstag.setDisplayBids(),this.requestMgr.apsRequestComplete=!0},e.prototype.alreadyRendered=function(){return!!this.requestMgr.didDirectRender&&(this.requestMgr.didDirectRender=!1,!0)},e.prototype.maybeRenderBid=function(t){return!(!t||!t.DirectRender)&&(this.requestMgr.didDirectRender=!0,this.renderInElement(this.elementID,t),!0)},e.prototype.removeSlot=function(){var t=this;googletag.cmd.push((function(){var e=t.slot;googletag.destroySlots([e]),t.slot=null,document.getElementById(t.elementID).innerHTML=null}));var e=this.anaWeb,n=e.createdSlots.indexOf(this);-1!==n&&e.createdSlots.splice(n,1)},e.prototype.updateTargeting=function(){var t=this.getTopBid();if(t){if(this.maybeRenderBid(t))return;var e=this.slot,n=this.baseTargeting;Object.keys(ut(ut({},n),t.Targeting)).forEach((function(n){e.setTargeting(n,t.Targeting[n])}))}},e.prototype.bidRequestReturned=function(t){if(void 0===t&&(t=!0),this.requestMgr.anaRequestComplete)return this.anaWeb.apsEnabled?!!this.requestMgr.apsRequestComplete&&(t&&this.refreshGPTSlot(),!0):(t&&this.refreshGPTSlot(),!0)},e.prototype.refreshGPTSlot=function(){var t=this;this.requestMgr.didDirectRender||googletag.cmd.push((function(){C("sending to ad server for ".concat(t)),googletag.pubads().refresh([t.slot])}))},e.prototype.refresh=function(t){var e=this;this.slot&&this.slot.clearTargeting(),this.resetRequestMgr();this.fetchANABids((function(n){C("ANA responded with bids for ".concat(e),n),t&&t(n),googletag.cmd.push((function(){e.updateTargeting(),e.anaRequestCompleted(),e.bidRequestReturned()}))})),this.fetchAPSBids((function(t){C("APS responded with bids for ".concat(e),t),googletag.cmd.push((function(){e.apsRequestCompleted(),e.bidRequestReturned()}))})),setTimeout(this.refreshGPTSlot.bind(this),m)},e.prototype.registerSlot=function(){var t=this,e=this,n=e.dimensions,o=e.format,i=e.collapseBeforeFill,r=e.collapseIfNoFill,a=e.adUnitID,s=e.elementID,d=this.prepareDimensions(n,o);d&&d.length?(googletag.cmd.push((function(){t.slot=googletag.defineSlot(a,d,s)})),googletag.cmd.push((function(){var e=t.slot;e.setCollapseEmptyDiv(i,r),e.addService(googletag.pubads()),googletag.display(s)}))):console.error("No dimensions found")},e.prototype.addSlotEventListener=function(t,e){var n=this.adUnitID;googletag.pubads().addEventListener(t,(function(t){t.slot.getAdUnitPath()===n&&e(t)}))},e.prototype.prepareDimensions=function(t,e){return t&&t.length?t:Dimensions[e]||[]},e}(dt);pt.prototype.toString=function(){return"BannerSlot('".concat(this.adUnitID,"', '").concat(this.elementID,"')")};var ht=function(){function t(t,e,n,o,i){this.playerType=t,this.adUnitID=o,this.targeting=i,this.adsManagerLoadedCustomCbk=e,this.videoPlayerID=n,this.html5Player=document.getElementById(n),this.initAds()}return t.prototype.initAds=function(){throw new Error("must be implemented by child class")},t.prototype.anaBidRequest=function(t){var e=this;t((function(t){e.imaInit(t)}),(function(t){throw Error("".concat(e.videoPlayerID," error getting ANA bids: ").concat(t))}))},t.prototype.imaInit=function(t){throw new Error("must be implemented by child class")},t.prototype.vastUrlAndVideoSrc=function(t){C("".concat(this.videoPlayerID," imaInit"));var e,n=(e=window.ana_vast)||(-1!==window.location.href.indexOf("ana_vast=")&&(e=A(window.location.href).searchParams.get(d))?e:"");if(n||(n=t),n){var o=this.html5Player.currentSrc;if(!o&&""!==o)throw Error("".concat(this.videoPlayerID," does not have a valid src"));return C("".concat(this.videoPlayerID," vast used: ").concat(n,", src: ").concat(o)),{videoVastUrl:n,videoSrc:o}}C("".concat(this.videoPlayerID," we don't have an ad to show"))},t.prototype.adsManagerLoadedCallback=function(t){throw new Error("must be implemented by child class")},t.prototype.addDefaultListeners=function(){var t=this,e=window.google;this.adsManagerLoadedCustomCbk&&this.adsManagerLoadedCustomCbk(this.html5Player,this.playerType,this.adsManager);var n=[e.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,e.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,e.ima.AdEvent.Type.CLICK,e.ima.AdEvent.Type.VIDEO_CLICKED,e.ima.AdEvent.Type.VIDEO_ICON_CLICKED,e.ima.AdEvent.Type.STARTED,e.ima.AdEvent.Type.AD_PROGRESS,e.ima.AdEvent.Type.AD_BUFFERING,e.ima.AdEvent.Type.IMPRESSION,e.ima.AdEvent.Type.PAUSED,e.ima.AdEvent.Type.RESUMED,e.ima.AdEvent.Type.FIRST_QUARTILE,e.ima.AdEvent.Type.MIDPOINT,e.ima.AdEvent.Type.THIRD_QUARTILE,e.ima.AdEvent.Type.COMPLETE,e.ima.AdEvent.Type.DURATION_CHANGE,e.ima.AdEvent.Type.USER_CLOSE,e.ima.AdEvent.Type.LOADED,e.ima.AdEvent.Type.ALL_ADS_COMPLETED,e.ima.AdEvent.Type.SKIPPED,e.ima.AdEvent.Type.LINEAR_CHANGED,e.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,e.ima.AdEvent.Type.AD_METADATA,e.ima.AdEvent.Type.AD_BREAK_READY,e.ima.AdEvent.Type.LOG,e.ima.AdEvent.Type.VOLUME_CHANGED,e.ima.AdEvent.Type.VOLUME_MUTED,e.ima.AdEvent.Type.INTERACTION],o=function(){var e;e=t.adUnitID,ot.Hertz.impression(e)};this.adsManager.addEventListener(e.ima.AdEvent.Type.IMPRESSION,o),this.adsManager.addEventListener(e.ima.AdEvent.Type.IMPRESSION,(function(){return t.adsManager.removeEventListener(e.ima.AdEvent.Type.IMPRESSION,o)}));for(var i=0;i<n.length;i++)this.adsManager.addEventListener(n[i],this.onAdEvent.bind(this)),C("".concat(this.videoPlayerID," bind ").concat(n[i]," ad event"))},t.prototype.onAdEvent=function(t){var e=window.google,n=t.type;n!==e.ima.AdEvent.Type.AD_PROGRESS&&C("".concat(this.videoPlayerID," ad event: ").concat(n))},t}(),ft=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),gt=function(t){function e(e,n,o,i){var r=t.call(this,L.VIDEO_JS,e,n,o,i)||this;return C("initializing IMAManagerHTML5 for",n),r.adPlaying=!1,r}return ft(e,t),e.prototype.initAds=function(){var t=this,e=window.google;if(!this.html5Player)throw Error("video element was not found on the page using id=".concat(this.videoPlayerID));this.overlayedBtnContainer=document.createElement("div"),this.overlayedBtnContainer.classList.add("ana-ad-overlay"),this.overlayedBtnContainer.id=this.videoPlayerID+"_ana_ad_overlay";var n=document.createElement("div");n.classList.add("ana-ad-container"),n.id=this.videoPlayerID+"_ana_ad_container",this.html5Player.after(this.overlayedBtnContainer,n),this.adDisplayContainer=new e.ima.AdDisplayContainer(n,this.html5Player),this.adsLoader=new e.ima.AdsLoader(this.adDisplayContainer),this.adsLoader.addEventListener(e.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.adsManagerLoadedCallback.bind(this),!1),this.adsLoader.addEventListener(e.ima.AdErrorEvent.Type.AD_ERROR,console.error,!1),this.html5Player.onended=this.adsLoader.contentComplete,window.addEventListener("resize",(function(){if(t.adsManager){var n=t.html5Player.clientWidth,o=t.html5Player.clientHeight;t.adsManager.resize(n,o,e.ima.ViewMode.NORMAL)}}))},e.prototype.imaInit=function(t){if(t&&""!==t){var e=window.google,n=this.vastUrlAndVideoSrc(t).videoVastUrl;this.adsManager&&this.adsManager.destroy(),this.adsLoader.contentComplete();var o=new e.ima.AdsRequest;o.adTagUrl=n,o.linearAdSlotWidth=640,o.linearAdSlotHeight=480,o.nonLinearAdSlotWidth=640,o.nonLinearAdSlotHeight=150,o.forceNonLinearFullSlot=!0,this.adsLoader.requestAds(o),this.overlayedBtnContainer.addEventListener("click",this.onOverlayedBtnContainerClick.bind(this)),this.overlayedBtnContainer.addEventListener("touchend",this.onOverlayedBtnContainerClick.bind(this))}},e.prototype.onOverlayedBtnContainerClick=function(t){t.preventDefault(),this.adPlaying?this.adsManager.resume():this.playAds(),this.toggleOverlayedBtnContainer()},e.prototype.toggleOverlayedBtnContainer=function(){this.overlayedBtnContainer&&(this.overlayedBtnContainer.hidden=!this.overlayedBtnContainer.hidden)},e.prototype.playAds=function(){var t=this,e=window.google;this.adDisplayContainer&&this.adDisplayContainer.initialize(),this.html5Player.load();try{var n=this.html5Player.getBoundingClientRect(),o=n.width,i=n.height;this.adsManager.init(o,i,e.ima.ViewMode.NORMAL),this.adsManager.addEventListener(e.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.onContentPauseRequested.bind(this)),this.adsManager.addEventListener(e.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.onContentResumeRequested.bind(this)),this.adsManager.addEventListener(e.ima.AdEvent.Type.LOADED,this.onAdLoaded.bind(this)),this.adsManager.addEventListener(e.ima.AdEvent.Type.STARTED,this.onStarted.bind(this)),this.adsManager.addEventListener(e.ima.AdEvent.Type.SKIPPED,this.onSkipped.bind(this)),this.adsManager.addEventListener(e.ima.AdEvent.Type.COMPLETE,this.onComplete.bind(this)),this.adsManager.addEventListener(e.ima.AdEvent.Type.PAUSED,(function(){t.toggleOverlayedBtnContainer()})),this.adsManager.start()}catch(t){this.html5Player.play()}},e.prototype.onComplete=function(){this.adPlaying=!1},e.prototype.onStarted=function(){this.adPlaying=!0},e.prototype.onSkipped=function(){this.adPlaying=!1,this.adDisplayContainer.destroy(),this.html5Player.play()},e.prototype.onContentPauseRequested=function(){this.adPlaying=!0,this.html5Player.pause()},e.prototype.onContentResumeRequested=function(){this.adPlaying=!1,this.html5Player.play()},e.prototype.onAdLoaded=function(t){t.getAd().isLinear()||this.html5Player.play()},e.prototype.adsManagerLoadedCallback=function(t){C("".concat(this.videoPlayerID," AdsManager loaded"));var e=window.google,n=new e.ima.AdsRenderingSettings;n.restoreCustomPlaybackStateOnAdBreakComplete=!0,n.uiElements=[e.ima.UiElements.AD_ATTRIBUTION,e.ima.UiElements.COUNTDOWN],this.adsManager=t.getAdsManager(this.html5Player,n),this.addDefaultListeners()},e}(ht),yt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),vt=function(t){function e(e,n,o,i){var r=t.call(this,L.VIDEO_JS,e,n,o,i)||this;return C("initializing IMAManagerVideoJS for",n),navigator.userAgent.match(/iPad|Android/i)&&r.html5Player.hasAttribute("controls")&&r.html5Player.removeAttribute("controls"),r.overlayedBtnContainer=document.getElementById(n),r}return yt(e,t),e.prototype.initAds=function(){var t=window.videojs;if(this.html5Player=document.getElementById(this.videoPlayerID+"_html5_api"),!this.html5Player)throw Error("video element was not found on the page using id=".concat(this.videoPlayerID));this.videoJSPlayer=t(this.videoPlayerID);var e={id:this.videoPlayerID,adLabel:"Advertisement",disableAdControls:!1,showControlsForJSAds:!0,adsManagerLoadedCallback:this.adsManagerLoadedCallback.bind(this)};this.videoJSPlayer.ima(e)},e.prototype.imaInit=function(t){if(t&&""!==t){var e=this.vastUrlAndVideoSrc(t),n=e.videoVastUrl,o=e.videoSrc;this.videoJSPlayer.ima.setContentWithAdTag(o,n,!1),this.videoJSPlayer.ima.requestAds(),this.boundBidRequestClick=this.onOverlayedBtnContainerClick.bind(this),this.boundBidRequestTouch=this.onOverlayedBtnContainerClick.bind(this),this.overlayedBtnContainer.addEventListener("click",this.boundBidRequestClick),this.overlayedBtnContainer.addEventListener("touchend",this.boundBidRequestTouch)}},e.prototype.onOverlayedBtnContainerClick=function(t){t.preventDefault(),this.videoJSPlayer.ima.initializeAdDisplayContainer(),this.overlayedBtnContainer.removeEventListener("click",this.boundBidRequestClick),this.overlayedBtnContainer.removeEventListener("touchend",this.boundBidRequestTouch)},e.prototype.adsManagerLoadedCallback=function(){C("".concat(this.videoPlayerID," AdsManager loaded")),this.adsManager=this.videoJSPlayer.ima.getAdsManager(),this.addDefaultListeners()},e}(ht),mt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),bt=function(){return bt=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},bt.apply(this,arguments)},Et=function(t){function e(e,n,o){var i,r=t.call(this,e,o)||this;if(r.playerType=n,void 0===o.startDelay)throw Error("startDelay must be specified for video ad slots");if(o.startDelay<-2)throw Error("startDelay must be valid");if(void 0===o.adPlacement)throw Error("adPlacement must be specified for video ad slots");if(void 0===o.adPosition)throw Error("adPosition must be specified for video ad slots");if(o.adPosition<1||o.adPosition>7)throw Error("adPosition must be valid not Unknown");if(!o.playbackMethod||o.playbackMethod<1||o.playbackMethod>6)throw Error("playbackMethod must be specified for video ad slots");if(r.startDelay=o.startDelay,r.adPlacement=o.adPlacement,r.adPosition=o.adPosition,r.playbackMethod=o.playbackMethod,r.wrapperDiv=document.getElementById(r.elementID),r.dimensions&&0===r.dimensions.length)throw new Error("".concat(r.elementID," dimensions must be either omitted or have at least one element in the array"));switch(r.playerType){case L.VIDEO_JS:i=vt;break;case L.HTML5:i=gt;break;default:throw Error("unsupported video player type: ".concat(n))}return r.videoManager=new i(o.adsManagerLoadedCbk,r.elementID,r.adUnitID,r.baseTargeting),r.videoManager.anaBidRequest(r.fetchANAVMAP.bind(r)),r}return mt(e,t),e.prototype.fetchANAVMAP=function(t,e){var n=this,o=this.currentDimensions(),i=bt(bt({},this.anaWeb.globalTargeting),this.baseTargeting);ot.VMAP.get(this.adUnitID,i,this.adPlacement,this.adPosition,this.playbackMethod,this.startDelay,o[0][0],o[0][1],(function(o){var i="";switch(o.code){case 200:i=o.tag_url;break;case f:return void(o.err_msg===g?console.warn("#".concat(n.elementID," ").concat(n.adUnitID," ANA user reached fcap")):e&&e(o.err_msg))}t&&t(i)}),(function(t){console.error(t),e(t.status.toString())}))},e.prototype.fetchAPSBids=function(t,e){},e.prototype.currentDimensions=function(){var t;if(this.dimensions)t=this.dimensions;else{var e=this.playerDimensions();t=[[e.w,e.h]]}if(0===t.length||2!==t[0].length)throw new Error("".concat(this.elementID," final dimensions are not valid: ").concat(t));return t},e.prototype.playerDimensions=function(){var t=this.wrapperDiv.getBoundingClientRect(),e=t.width,n=t.height;if(0===e||0===n)throw Error("".concat(this.elementID," wrong video ad slot dimensions: ").concat(e,"x").concat(n));return{w:e,h:n}},e}(dt);Et.prototype.toString=function(){return"VideoSlot('".concat(this.adUnitID,"', ").concat(this.playerType,", '").concat(this.elementID,"')")};var At,wt=function(){function t(t){if(this.anaWeb=t,window.addEventListener)window.addEventListener("message",this.handleMessage.bind(this),!1);else{if(!window.attachEvent)throw Error("No event listener found!");window.attachEvent("onmessage",this.handleMessage.bind(this))}}return t.prototype.handleMessage=function(t){if(r=t.origin,p.some((function(t){return t.test(r)}))&&t.data&&t.data.bidID){var e=t.data,n=e.adUnitID,o=e.bidID,i=this.anaWeb.bidManager.getBidToRender(n,o);i&&(t.source?t.source.postMessage(JSON.stringify(i),t.origin):console.error("e.source is not available in this context"),it(n,i))}var r;(function(t){return h.some((function(e){return e.test(t)}))})(t.origin)&&t.data&&t.data.msgType&&"cookieSyncingSuccess"===t.data.msgType&&(C("synced cookie message event for ".concat(t.data.bidderId,", id=").concat(t.data.partnerUid)),j(t.data.bidderId,t.data.partnerUid))},t}(),St=function(){return St=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},St.apply(this,arguments)},It={enableSingleRequest:!1,globalTargeting:{},sandboxIframe:!1,collapseEmptyDivs:!1},Tt=function(t){if(window.googletag)throw new Error("attempting to initialize ANA sdk with pre-initialized gpt integration. aborting");var e;!function(){document.body||console.error("loadGPTTagJS called before there is a body to append to");var t=document.createElement("script");t.async=!0,t.defer=!0,t.src=l,document.body.appendChild(t),C("added GPT script on the page ".concat(l))}();var n=(e=t?St(St({},It),t):It).enableSingleRequest,o=e.globalTargeting,i=e.sandboxIframe,r=e.collapseEmptyDivs;window.googletag=window.googletag||{},googletag.cmd=googletag.cmd||[],googletag.cmd.push((function(){n&&googletag.pubads().enableSingleRequest(),i&&googletag.pubads().setSafeFrameConfig({sandbox:!0}),r&&googletag.pubads().collapseEmptyDivs(),o&&Object.keys(o)&&Object.keys(o).forEach((function(t){googletag.pubads().setTargeting(t,o[t])})),googletag.pubads().disableInitialLoad(),googletag.enableServices()}))};!function(t){t.GOOGLE="googletag"}(At||(At={}));var Dt,Ot=function(){return Ot=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Ot.apply(this,arguments)},_t={pubID:null,adServer:At.GOOGLE},Pt=function(t){if(window.apstag)throw new Error("attempting to initialize ANA sdk with pre-initialized apt integration");!function(){function t(t,e){window.apstag._Q.push([t,e])}document.body||console.error("loadAPSTagJS called before there is a body to append to"),window.apstag={init:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t("i",e)},fetchBids:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t("f",e)},setDisplayBids:function(){},targetingKeys:function(){return[]},_Q:[]};var e=document.createElement("script");e.async=!0,e.src=u;var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n),C("added APS script on the page ".concat(u))}();var e=Ot(Ot({},_t),t),n=e.pubID,o=e.adServer;if(!n)throw new Error("to fully enable amazon publisher tag integration you need to pass at least `pubID`");window.apstag.init({pubID:n,adServer:o})},Rt=new(function(){function t(){this._usPrivacyData=null,this._tcData=null}return Object.defineProperty(t.prototype,"tcData",{get:function(){return this._tcData},set:function(t){this._tcData=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tcfV2String",{get:function(){return this._tcData?this._tcData.tcString:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"usPrivacyData",{get:function(){return this._usPrivacyData},set:function(t){this._usPrivacyData=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"usPrivacyString",{get:function(){return this._usPrivacyData?this._usPrivacyData.uspString:null},enumerable:!1,configurable:!0}),t}()),Ct=function(){function t(t,e){void 0===t&&(t=0),this.count=t,this.doneCallback=e}return t.prototype.add=function(t){void 0===t&&(t=1),this.count+=t},t.prototype.decrement=function(t){void 0===t&&(t=1),this.count=this.count-t,0===this.count&&this.doneCallback()},t}(),Mt=function(){function t(){this.bidsByID={},this.bidsByAdUnit={},this.usedBidIDs={}}return t.prototype.addBids=function(t,e){var n=this,o=this,i=o.usedBidIDs,r=o.bidsByID,a=o.bidsByAdUnit,s=(0,o.adUnitKey)(e);t.forEach((function(t){var e=t.BidID;n.getBidByID(e)||i[e]||(r[e]=t,a[s]?a[s].push(t):a[s]=[t])})),a[s].sort((function(t,e){return t.Value-e.Value}))},t.prototype.getBid=function(t){var e=this.bidsByAdUnit,n=(0,this.adUnitKey)(t);if(e[n]&&e[n].length){var o=e[n];return o[o.length-1]}return null},t.prototype.getBidByID=function(t){return this.bidsByID[t]||null},t.prototype.getBidToRender=function(t,e){return this.usedBidIDs[e]?null:(this.useBid(t,e),this.getBidByID(e))},t.prototype.useBid=function(t,e){var n=this,o=n.usedBidIDs,i=n.bidsByAdUnit,r=(0,n.adUnitKey)(t);if(!o[e]){var a=i[r].map((function(t){return t.BidID})).indexOf(e);-1!==a&&i[r].splice(a,1),o[e]=!0}},t.prototype.reset=function(){this.bidsByID={},this.bidsByAdUnit={},this.usedBidIDs={}},t.prototype.adUnitKey=function(t){var e=window.location.href;return"".concat(t,":").concat(e)},t}(),Bt=function(){return Bt=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Bt.apply(this,arguments)},Lt={slotEventsHandlers:{},gptOptions:{globalTargeting:{}},apsOptions:null,syncCookies:!0,propertyId:window.location.hostname,videoOptions:null,lightMode:!1},kt=function(){function t(t){var e;void 0===t&&(t={}),this.createdSlots=[],this.createdGoogleSlots=[],this.createdVideoContainers=[];var n=(e=t?Bt(Bt({},Lt),t):Lt).slotEventsHandlers,o=e.gptOptions,i=e.apsOptions,r=e.syncCookies,a=e.propertyId,s=e.lightMode;this.bidManager=new Mt,this.consentManager=Rt,this.slotEventsHandlers=n,this.msgHandler=new wt(this),this.syncCookies=r,this.propertyId=a,this.apsEnabled=!!i,this.refreshedAllSlots=!1,this.globalTargeting=o.globalTargeting?o.globalTargeting:{},this.lightMode=!!s,window.ANAWebSDKInstance=this,"__tcfapi"in window&&(C("GDPR - consent management framework was found on the page"),window.__tcfapi("getTCData",2,(function(t,e){e?(C("getTCData cbk success",t),Rt.tcData=t):C("getTCData cbk fail",t)}))),"__uspapi"in window&&(C("CCPA - consent management framework was found on the page"),window.__uspapi("getUSPData",1,(function(t,e){e?(C("getUSPData cbk success",t),Rt.usPrivacyData=t):C("getUSPData cbk fail",t)}))),this.uid=q(),this.sessionId=tt(),this.syncCookies&&this.syncUserCookies(),this.lightMode||(i&&Pt(i),Tt(o))}return t.prototype.createSlot=function(t,e){var n=null;switch(t){case B.GOOGLE:this.lightMode&&C("making google banner slots in light mode seems sketchy"),n=new pt(this,e),this.createdGoogleSlots.push(n);break;case B.ANA:this.lightMode||C("making a lightmode slot without the SDK in lightmode seems sketchy"),n=new dt(this,e);break;default:throw Error("Specified slot type is not supported: ".concat(t))}return this.createdSlots.push(n),n},t.prototype.createVideoSlot=function(t,e){var n=new Et(this,t,e);return this.createdVideoContainers.push(n),n},t.prototype.refreshAllGoogleSlots=function(){var t=this,e=this.waitGroup;this.refreshedAllSlots=!1;var n=this.createdGoogleSlots;if(null==e){var o=n.filter((function(t){return t.apsEnabled})).length,i=n.length+o;e=new Ct(i,this.onBidsFetchSuccess.bind(this)),this.waitGroup=e,n.forEach((function(n){if(n){if(n.slotType!==B.GOOGLE)throw new Error("ANA Web SDK does not support refreshAll for ".concat(n.slotType," slot type. Fix it for slot ").concat(n));n.fetchANABids((function(o){C("refreshAllSlots - ANA responded with bids for ".concat(n),o),googletag.cmd.push((function(){n.updateTargeting(),n.anaRequestCompleted(),e.decrement(),t.bidRequestReturned(n,o)}))}),(function(){t.waitGroup=null})),n.apsEnabled&&n.fetchAPSBids((function(o){C("refreshAllSlots - APS responded with bids for ".concat(n),o),googletag.cmd.push((function(){n.apsRequestCompleted(),e.decrement(),t.bidRequestReturned(n,o)}))}))}})),setTimeout(this.onBidsFetchSuccess.bind(this),m)}else console.warn("calling refreshAllSlots too fast")},t.prototype.bidRequestReturned=function(t,e){if(C("ANAWeb bidRequestReturned called for ".concat(t," with bids:"),e),t.bidRequestReturned(!1)){for(var n=0,o=this.createdSlots;n<o.length;n++){if(!o[n].bidRequestReturned(!1))return}this.onBidsFetchSuccess()}},t.prototype.refreshSubscribedBannerSlots=function(t,e){if(void 0===e&&(e=3e4),!document.hasFocus())return C("skipping auto refresh, document not in focus, trying later with slots:",t),void setTimeout(this.refreshSubscribedBannerSlots.bind(this,t,e),300);C("auto refreshing slots:",t),t.forEach((function(t){return t.refresh()})),setTimeout(this.refreshSubscribedBannerSlots.bind(this,t,e),e)},t.prototype.autoRefreshSlots=function(t,e,n){void 0===e&&(e=3e4),void 0===n&&(n=!1),C("subscribed slots for auto refresh:",t,"in",e,"ms, firstInstantRefresh=",n),n?this.refreshSubscribedBannerSlots(t,e):setTimeout(this.refreshSubscribedBannerSlots.bind(this,t,e),e)},Object.defineProperty(t,"version",{get:function(){return"2.1.1b"},enumerable:!1,configurable:!0}),t.prototype.onBidsFetchSuccess=function(){var t=this;if(C("onBidsFetchSuccess, this.refreshedAllSlots=",this.refreshedAllSlots),this.refreshedAllSlots)C("onBidsFetchSuccess, skipping since slots are already refreshed");else{this.refreshedAllSlots=!0;var e=[];this.createdGoogleSlots.forEach((function(t){t.alreadyRendered()||e.push(t.slot)})),0!==e.length?googletag.cmd.push((function(){t.waitGroup=null,C("sending to ad server all the slots"),googletag.pubads().refresh(e)})):this.waitGroup=null}},t.prototype.syncUserCookies=function(){if(!this.propertyId)throw Error("propertyId is needed to initialize SDK");var t=_();x(t,this.uid,Y())},t}();function Nt(){C("ðŸš‚ðŸš‚ðŸš‚ðŸš‚ðŸš‚ðŸš‚ðŸš‚ðŸš‚ ANA Web SDK ".concat("2.1.1b"," ðŸš‚ðŸš‚ðŸš‚ðŸš‚ðŸš‚ðŸš‚ðŸš‚ðŸš‚")),C("dispatching anaReadyEvent"),document.dispatchEvent(new CustomEvent("ANAReady"))}return function(t){t.VideoMp4="video/mp4",t.VideoOgg="video/ogg"}(Dt||(Dt={})),"loading"!==document.readyState?setTimeout(Nt,0):document.addEventListener("DOMContentLoaded",Nt),window.ANAWeb=kt,window.SlotTypeEnum=B,kt.SlotTypeEnum=B,Object.defineProperty(kt,"uid",{get:function(){return q()}}),Object.defineProperty(kt,"sessionId",{get:function(){return tt()}}),kt.AdPosition=K,kt.ContentDeliveryMethod=Z,kt.PlaybackCessationMode=z,kt.PlaybackMethod=H,kt.StartDelay=F,kt.VideoApiFramework=Q,kt.VideoLinearity=J,kt.VideoPlacementType=W,kt.VideoPlayerType=L,kt.VideoProtocol=$,kt.Mime=Dt,o})()}));
// MediaLab Inc.